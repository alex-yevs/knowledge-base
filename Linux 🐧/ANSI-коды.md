
## Что такое ANSI-коды?

**ANSI-коды** (также ANSI escape-последовательности) - это стандарт управления терминалом, позволяющий форматировать текст, управлять цветом, положением курсора и другими аспектами отображения в текстовых терминалах.

Они называются "escape-последовательностями", потому что начинаются с символа ESC (`\033` в восьмеричной системе или `\x1b` в шестнадцатеричной).
## История и происхождение

- **1970-е**: Разработаны для управления видеодисплеями терминалов
- **1980-е**: Стандартизированы как ANSI X3.64
- **1990-е - настоящее время**: Поддерживаются всеми современными терминалами (Linux, macOS, эмуляторами терминалов в Windows)

## Структура ANSI-кода

```
\033[<код>m     # для цветов и стилей
\033[<код>A     # переместить курсор вверх
\033[<код>B     # переместить курсор вниз
\033[<код>C     # переместить курсор вправо
\033[<код>D     # переместить курсор влево
\033[<код>;...m # комбинированные коды
```

## Основные ANSI-коды

### 1. **Стили текста**

| Код | Эффект | Пример |
|-----|--------|--------|
| `0` | Сброс всех атрибутов | `\033[0m` |
| `1` | Жирный (яркий) | `\033[1m` |
| `2` | Тусклый | `\033[2m` |
| `3` | Курсив | `\033[3m` |
| `4` | Подчеркнутый | `\033[4m` |
| `5` | Мигающий | `\033[5m` |
| `7` | Инвертированный | `\033[7m` |
| `8` | Скрытый | `\033[8m` |
| `9` | Зачеркнутый | `\033[9m` |

### 2. **Цвета текста (Foreground)**

| Код | Цвет | Код (яркий) | Цвет (яркий) |
|-----|------|-------------|--------------|
| `30` | Черный | `90` | Темно-серый |
| `31` | Красный | `91` | Ярко-красный |
| `32` | Зеленый | `92` | Ярко-зеленый |
| `33` | Желтый | `93` | Ярко-желтый |
| `34` | Синий | `94` | Ярко-синий |
| `35` | Пурпурный | `95` | Ярко-пурпурный |
| `36` | Голубой | `96` | Ярко-голубой |
| `37` | Белый | `97` | Ярко-белый |

### 3. **Цвета фона (Background)**

| Код | Цвет | Код (яркий) | Цвет (яркий) |
|-----|------|-------------|--------------|
| `40` | Черный | `100` | Темно-серый |
| `41` | Красный | `101` | Ярко-красный |
| `42` | Зеленый | `102` | Ярко-зеленый |
| `43` | Желтый | `103` | Ярко-желтый |
| `44` | Синий | `104` | Ярко-синий |
| `45` | Пурпурный | `105` | Ярко-пурпурный |
| `46` | Голубой | `106` | Ярко-голубой |
| `47` | Белый | `107` | Ярко-белый |

## Примеры комбинирования

```python
# Жирный красный текст на желтом фоне
print('\033[1;31;43mТекст\033[0m')

# Подчеркнутый зеленый текст
print('\033[4;32mТекст\033[0m')

# Мигающий синий текст (не везде работает)
print('\033[5;34mТекст\033[0m')
```

## 256 цветов

Современные терминалы поддерживают 256 цветов:

```python
# Формат: \033[38;5;<код>m для текста
# Формат: \033[48;5;<код>m для фона

for i in range(256):
    print(f'\033[38;5;{i}mЦвет {i}\033[0m')
```

## True Color (16.7 млн цветов)

Некоторые терминалы поддерживают 24-битные цвета:

```python
# Формат: \033[38;2;<r>;<g>;<b>m для текста
# Формат: \033[48;2;<r>;<g>;<b>m для фона

print('\033[38;2;255;100;50mОранжевый текст\033[0m')
print('\033[48;2;100;50;200mФиолетовый фон\033[0m')
```

## Управление курсором

```python
# Сохранить позицию курсора
print('\033[s', end='')

# Восстановить позицию курсора
print('\033[u', end='')

# Переместить курсор в позицию (10, 20)
print('\033[10;20H', end='')

# Очистить экран
print('\033[2J', end='')

# Очистить строку
print('\033[K', end='')
```

## Прогресс-бар с ANSI-кодами

```python
import time
import sys

def progress_bar(current, total, bar_length=50):
    percent = current / total
    filled = int(bar_length * percent)
    bar = '█' * filled + '░' * (bar_length - filled)
    
    # \r возвращает курсор в начало строки
    sys.stdout.write(f'\r\033[32mПрогресс: |{bar}| {percent:.1%}\033[0m')
    sys.stdout.flush()

for i in range(101):
    progress_bar(i, 100)
    time.sleep(0.05)
print()  # Переход на новую строку
```

## Альтернативы ANSI-кодам

### 1. **Библиотеки для Python**

| Библиотека | Установка | Особенности |
|------------|-----------|-------------|
| **colorama** | `pip install colorama` | Кроссплатформенная, простая |
| **termcolor** | `pip install termcolor` | Простой синтаксис |
| **rich** | `pip install rich` | Красивый вывод, таблицы, прогресс-бары |
| **blessed** | `pip install blessed` | Полный контроль над терминалом |
| **curses** | Встроенная | Низкоуровневый контроль (Unix) |

### 2. **HTML/CSS для веба**
```html
<span style="color: red; font-weight: bold;">Красный жирный текст</span>
```

## Пример с библиотекой rich

```python
from rich.console import Console
from rich.table import Table
from rich.progress import track
import time

console = Console()

# Цветной текст
console.print("Красный текст", style="red")
console.print("Жирный зеленый", style="bold green")
console.print("Радуга", style="bold rainbow")

# Таблица
table = Table(title="Пример таблицы")
table.add_column("Имя", style="cyan")
table.add_column("Возраст", style="magenta")
table.add_column("Город", style="green")

table.add_row("Анна", "25", "Москва")
table.add_row("Иван", "30", "СПб")
console.print(table)

# Прогресс-бар
for i in track(range(100), description="Обработка..."):
    time.sleep(0.02)
```

## Когда что использовать?

- **ANSI-коды**: Для простых скриптов, быстрых решений
- **Colorama**: Когда нужна совместимость с Windows
- **Rich**: Для красивых CLI-приложений с таблицами и графикой
- **Curses**: Для полноценных TUI-приложений (как текстовые редакторы)
- **HTML/CSS**: Для веб-интерфейсов

## Заключение

ANSI-коды - это мощный, но низкоуровневый инструмент для форматирования текста в терминале. Для простых задач можно использовать их напрямую, но для сложных проектов лучше взять специализированную библиотеку, такую как **rich** или **colorama**.